(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     14390,        339]
NotebookOptionsPosition[     12475,        303]
NotebookOutlinePosition[     12839,        319]
CellTagsIndexPosition[     12796,        316]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{"Quit", "[", "]"}]], "Input",
 CellChangeTimes->{{3.792056493539586*^9, 3.792056495017077*^9}},
 CellLabel->"In[1]:=",ExpressionUUID->"5c2b9ac4-3ae5-4ac0-bc75-84a12bdc7627"],

Cell[BoxData[
 RowBox[{"SetDirectory", "[", 
  RowBox[{"NotebookDirectory", "[", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.792056355671527*^9, 3.79205636843603*^9}, 
   3.792058090520795*^9},
 CellLabel->"In[1]:=",ExpressionUUID->"1386c344-e425-45f3-adb1-986dc1a3e2c5"],

Cell[BoxData[
 RowBox[{"Get", "[", "\"\<../../ltd_math_utils/ltdTools.m\>\"", 
  "]"}]], "Input",
 CellChangeTimes->{{3.792056333179846*^9, 3.792056340678121*^9}, {
  3.7920580963748713`*^9, 3.792058098228218*^9}, {3.793450976307426*^9, 
  3.7934509870674143`*^9}, {3.7967083324937067`*^9, 3.7967083562158403`*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"2eda4ad7-ab06-4023-b628-9918809ec85f"],

Cell[BoxData[
 RowBox[{"?", "contractLorentz"}]], "Input",
 CellChangeTimes->{{3.793554218853558*^9, 3.7935542210564413`*^9}},
 CellLabel->"In[3]:=",ExpressionUUID->"b1ecf9d0-ad4f-498e-96fd-d1c36bbd396f"],

Cell[CellGroupData[{

Cell["Minimal usage:", "Section",
 CellChangeTimes->{{3.793553343604179*^9, 
  3.793553352579281*^9}},ExpressionUUID->"c3a4e134-961f-48fd-8628-\
6f896df630b7"],

Cell[BoxData[
 RowBox[{"(*", " ", 
  RowBox[{
   RowBox[{"perform", " ", "color"}], "-", "contractions"}], " ", 
  "*)"}]], "Input",
 CellChangeTimes->{{3.793553215761034*^9, 
  3.793553226629354*^9}},ExpressionUUID->"9ae6e143-94ba-444c-92be-\
3275c1bb2ad3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"testNum", "=", 
   RowBox[{"contractColor", "[", 
    RowBox[{
     RowBox[{"Import", "[", "\"\<./testFile.m\>\"", "]"}], ",", "i", ",", 
     "a"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7920566900327787`*^9, 3.7920567064048443`*^9}, {
   3.7920570009122753`*^9, 3.792057002501444*^9}, {3.792057123471056*^9, 
   3.792057137189036*^9}, {3.79205755810252*^9, 3.792057564121728*^9}, {
   3.792058157256185*^9, 3.792058173194643*^9}, {3.792058443113826*^9, 
   3.7920584466428003`*^9}, 3.792058491790532*^9, {3.792058552438938*^9, 
   3.792058552561846*^9}, {3.792058692627179*^9, 3.792058711868992*^9}, {
   3.792058870505661*^9, 3.792058881493929*^9}, {3.7920589889877872`*^9, 
   3.7920590165647373`*^9}, {3.7920593181731577`*^9, 
   3.7920593221907177`*^9}, {3.792059765807028*^9, 3.792059771935398*^9}, {
   3.792060577172154*^9, 3.792060578333832*^9}, {3.7920623805864773`*^9, 
   3.79206240682075*^9}, 3.7920625806180677`*^9, {3.792063513902833*^9, 
   3.7920635659740553`*^9}, {3.7920636209332857`*^9, 3.792063637869719*^9}, {
   3.792063775422312*^9, 3.7920637932885027`*^9}, {3.792063825708514*^9, 
   3.792063838959827*^9}, {3.792063913639673*^9, 3.7920639162581453`*^9}, {
   3.792065653987314*^9, 3.792065664565894*^9}, {3.792065747635646*^9, 
   3.7920657770601597`*^9}, {3.792065999311747*^9, 3.792066001109707*^9}, {
   3.792066099257081*^9, 3.7920661109172087`*^9}, {3.7920661428971252`*^9, 
   3.792066205842023*^9}, {3.7920666273208523`*^9, 3.7920666363701363`*^9}, 
   3.792066958713023*^9, {3.7920670581861486`*^9, 3.7920670826753397`*^9}, 
   3.792067162684019*^9, 3.792067405468416*^9, {3.792067464687501*^9, 
   3.792067466499278*^9}, {3.7920677923874207`*^9, 3.7920677943357573`*^9}, 
   3.79206789119518*^9, {3.792067979964513*^9, 3.792068000254984*^9}, {
   3.79206804606199*^9, 3.792068052973465*^9}, {3.7935198267087183`*^9, 
   3.793519854826818*^9}, 3.7935381383623667`*^9, {3.793539135956205*^9, 
   3.7935391645458508`*^9}, {3.7935397924045887`*^9, 3.793539807855949*^9}},
 CellLabel->"In[4]:=",ExpressionUUID->"a352a873-fc56-4f8d-a28e-9cdc1cf72244"],

Cell[BoxData[
 RowBox[{"(*", " ", 
  RowBox[{"gamma", "-", 
   RowBox[{
   "algebra", " ", "is", " ", "now", " ", "in", " ", "contract", " ", 
    "lorentz"}]}], " ", "*)"}]], "Input",
 CellChangeTimes->{{3.7935532375994673`*^9, 
  3.793553259867296*^9}},ExpressionUUID->"b60df189-0e94-47f0-93c5-\
c3e1108d467a"],

Cell[BoxData[{
 RowBox[{"Print", "[", "\"\<before\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{"testNum", "[", 
  RowBox[{"[", 
   RowBox[{"1", ",", "1"}], "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<after\>\"", "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"testNum", "[", 
   RowBox[{"[", 
    RowBox[{"1", ",", "1"}], "]"}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.7935412226352367`*^9, 3.793541228843483*^9}, {
  3.793541388511175*^9, 3.793541415308198*^9}, {3.7935422410925922`*^9, 
  3.7935422426896973`*^9}, {3.7935532665393467`*^9, 3.7935533016576357`*^9}},
 CellLabel->"In[5]:=",ExpressionUUID->"8db1644e-308a-4cdf-bbd2-eaf1b1bcf387"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Simplifying spin chains", "Section",
 CellChangeTimes->{{3.7935533758765097`*^9, 
  3.7935533834263697`*^9}},ExpressionUUID->"92f0d8d1-3e29-4b06-9634-\
f00c2db0f067"],

Cell[BoxData[
 RowBox[{"(*", " ", 
  RowBox[{
  "spin", " ", "chain", " ", "with", " ", "doubled", " ", "momenta", " ", 
   "and", " ", "doubled", " ", "Lorentz", " ", "indices"}], " ", 
  "*)"}]], "Input",
 CellChangeTimes->{{3.793549873369553*^9, 3.7935498838987503`*^9}, {
  3.793553400068605*^9, 
  3.79355343752141*^9}},ExpressionUUID->"7dda9615-0c0f-4d7e-ae17-\
dde6e4b7f1f6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"spinChain1", "=", 
   RowBox[{"gamma", "[", 
    RowBox[{"s1", ",", "mu", ",", 
     RowBox[{"lVec", "[", "p", "]"}], ",", "nu", ",", 
     RowBox[{"lVec", "[", "p", "]"}], ",", "s2"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"spinChain2", "=", 
   RowBox[{"gamma", "[", 
    RowBox[{"s1", ",", "mu", ",", 
     RowBox[{"lVec", "[", "p2", "]"}], ",", "mu", ",", 
     RowBox[{"lVec", "[", "p2", "]"}], ",", "s2"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"spinChain3", "=", 
   RowBox[{
    RowBox[{"spinorUbar", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1", ",", "mmq"}], "}"}], ",", "s1"}], "]"}], 
    RowBox[{"gamma", "[", 
     RowBox[{"s1", ",", "mu", ",", 
      RowBox[{"lVec", "[", "p1", "]"}], ",", "nu", ",", 
      RowBox[{"lVec", "[", "p2", "]"}], ",", "s2"}], "]"}], 
    RowBox[{"spinorU", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p2", ",", "mmq"}], "}"}], ",", "s2"}], "]"}]}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.793553447784959*^9, 3.7935534858676863`*^9}, {
   3.793553632931693*^9, 3.7935536974143257`*^9}, 3.793553746784534*^9, {
   3.793553816313608*^9, 3.7935538833278522`*^9}, 3.793553968664207*^9, {
   3.79670852417669*^9, 3.796708529836604*^9}},
 CellLabel->"In[30]:=",ExpressionUUID->"c42ff1d3-0508-40e7-bedc-88e4fec67f19"],

Cell[BoxData[{
 RowBox[{"Print", "[", "\"\<Example 1: Doubled momenta\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Without spin-chain simplification\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", "spinChain1", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<With spin-chain simplification:\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"spinChain1", ",", 
   RowBox[{"spinChainSimplify", "\[Rule]", "True"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<------------------------------------------\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Example 2: Doubled momenta & doubled indices\>\"",
   "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Without spin-chain simplification\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", "spinChain2", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<With spin-chain simplification:\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"spinChain2", ",", 
   RowBox[{"spinChainSimplify", "\[Rule]", "True"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<------------------------------------------\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Example 3: With spinors and Dirac EQ\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Without spin-chain simplification\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", "spinChain3", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<With spin-chain simplification:\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"spinChain3", ",", 
   RowBox[{"spinChainSimplify", "\[Rule]", "True"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.793553518364059*^9, 3.793553642059717*^9}, {
   3.793553677499192*^9, 3.793553716049777*^9}, {3.793553762154393*^9, 
   3.793553810509409*^9}, {3.793553898290004*^9, 3.793553938567692*^9}, 
   3.793554339356514*^9},
 CellLabel->"In[33]:=",ExpressionUUID->"9a4516e7-8f59-4749-a074-1bf63568ef2b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Applying polarization sums", "Section",
 CellChangeTimes->{{3.7935533758765097`*^9, 3.7935533834263697`*^9}, {
  3.793554056188012*^9, 
  3.793554069165593*^9}},ExpressionUUID->"fa4b9f6b-ac3c-449f-afdd-\
93be664b56c6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"spinChain1", "=", 
   RowBox[{
    RowBox[{"spinorU", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1", ",", "mmq"}], "}"}], ",", "s1"}], "]"}], 
    RowBox[{"spinorUbar", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1", ",", "mmq"}], "}"}], ",", "s2"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"spinChain2", "=", 
   RowBox[{
    RowBox[{"gamma", "[", 
     RowBox[{"s1", ",", "mu", ",", 
      RowBox[{"lVec", "[", "p2", "]"}], ",", "mu", ",", 
      RowBox[{"lVec", "[", "p2", "]"}], ",", "s2"}], "]"}], 
    RowBox[{"spinorU", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1", ",", "mmq"}], "}"}], ",", "s2"}], "]"}], 
    RowBox[{"spinorUbar", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p1", ",", "mmq"}], "}"}], ",", "s1"}], "]"}]}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.7935540886671143`*^9, 3.793554164897605*^9}, 
   3.79355431736749*^9, {3.793554439100546*^9, 3.7935544408901033`*^9}, {
   3.796708560640029*^9, 3.796708574399325*^9}},
 CellLabel->"In[50]:=",ExpressionUUID->"075cc57d-2189-464b-beac-ac947b617e89"],

Cell[BoxData[{
 RowBox[{"Print", "[", "\"\<Example 1: Minimal polarization sum\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Without anything \>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", "spinChain1", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<With polarization sum:\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"spinChain1", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"spinChainSimplify", "\[Rule]", "True"}], ",", 
     RowBox[{"polarizationSum", "\[Rule]", "True"}]}], "}"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Example 2: Minimal polarization sum\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<Without anything \>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", "spinChain2", "]"}], "\[IndentingNewLine]", 
 RowBox[{"Print", "[", "\"\<With polarization sum:\>\"", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"contractLorentz", "[", 
  RowBox[{"spinChain2", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"spinChainSimplify", "\[Rule]", "True"}], ",", 
     RowBox[{"polarizationSum", "\[Rule]", "True"}]}], "}"}]}], 
  "]"}]}], "Input",
 CellChangeTimes->{{3.7935540886671143`*^9, 3.793554209389715*^9}, {
  3.7935542445886307`*^9, 3.793554280711306*^9}, {3.793554357756374*^9, 
  3.793554391610811*^9}},
 CellLabel->"In[52]:=",ExpressionUUID->"aa9047ac-9aa6-4219-b350-0dc38baf9328"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.7935540886671143`*^9, 3.793554209389715*^9}, {
   3.7935542445886307`*^9, 3.793554253046711*^9}, 
   3.793554354283498*^9},ExpressionUUID->"1903214c-c35f-49cf-842e-\
f4c608cb0b50"]
}, Open  ]]
},
WindowSize->{2560, 1376},
WindowMargins->{{0, Automatic}, {0, Automatic}},
Magnification:>1.3 Inherited,
FrontEndVersion->"12.0 for Linux x86 (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 196, 3, 40, "Input",ExpressionUUID->"5c2b9ac4-3ae5-4ac0-bc75-84a12bdc7627"],
Cell[757, 25, 273, 5, 40, "Input",ExpressionUUID->"1386c344-e425-45f3-adb1-986dc1a3e2c5"],
Cell[1033, 32, 393, 6, 40, "Input",ExpressionUUID->"2eda4ad7-ab06-4023-b628-9918809ec85f"],
Cell[1429, 40, 204, 3, 40, "Input",ExpressionUUID->"b1ecf9d0-ad4f-498e-96fd-d1c36bbd396f"],
Cell[CellGroupData[{
Cell[1658, 47, 159, 3, 88, "Section",ExpressionUUID->"c3a4e134-961f-48fd-8628-6f896df630b7"],
Cell[1820, 52, 258, 7, 40, "Input",ExpressionUUID->"9ae6e143-94ba-444c-92be-3275c1bb2ad3"],
Cell[2081, 61, 2126, 32, 40, "Input",ExpressionUUID->"a352a873-fc56-4f8d-a28e-9cdc1cf72244"],
Cell[4210, 95, 312, 8, 40, "Input",ExpressionUUID->"b60df189-0e94-47f0-93c5-c3e1108d467a"],
Cell[4525, 105, 702, 13, 128, "Input",ExpressionUUID->"8db1644e-308a-4cdf-bbd2-eaf1b1bcf387"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5264, 123, 172, 3, 88, "Section",ExpressionUUID->"92f0d8d1-3e29-4b06-9634-f00c2db0f067"],
Cell[5439, 128, 382, 9, 40, "Input",ExpressionUUID->"7dda9615-0c0f-4d7e-ae17-dde6e4b7f1f6"],
Cell[5824, 139, 1372, 35, 99, "Input",ExpressionUUID->"c42ff1d3-0508-40e7-bedc-88e4fec67f19"],
Cell[7199, 176, 2149, 41, 505, "Input",ExpressionUUID->"9a4516e7-8f59-4749-a074-1bf63568ef2b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9385, 222, 224, 4, 88, "Section",ExpressionUUID->"fa4b9f6b-ac3c-449f-afdd-93be664b56c6"],
Cell[9612, 228, 1140, 32, 70, "Input",ExpressionUUID->"075cc57d-2189-464b-beac-ac947b617e89"],
Cell[10755, 262, 1472, 32, 302, "Input",ExpressionUUID->"aa9047ac-9aa6-4219-b350-0dc38baf9328"],
Cell[12230, 296, 229, 4, 40, "Input",ExpressionUUID->"1903214c-c35f-49cf-842e-f4c608cb0b50"]
}, Open  ]]
}
]
*)

